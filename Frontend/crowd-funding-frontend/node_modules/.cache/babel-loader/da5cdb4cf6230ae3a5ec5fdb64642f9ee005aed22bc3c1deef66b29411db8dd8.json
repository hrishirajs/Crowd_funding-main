{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import Pagination from\"./pagination\";import Loader from\"./loader\";import{getAllQueries,deleteQuery}from\"../services/query\";import{paginate}from\"../utills/paginate\";import styles from\"./styles/dashboard.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Query=()=>{const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState(1);useEffect(()=>{async function getData(){const{data,err}=await getAllQueries();if(err===undefined){setData(data);setLoading(false);}else{if(err.response&&err.response.data){toast.error(err.response.data.message);}else toast.error(\"Something went wrong\");console.log(\"Error\",err);}}getData();return null;},[]);if(!data||data.length===0){return loading?/*#__PURE__*/_jsx(Loader,{}):null;}const handlePageChange=page=>{setCurrentPage(page);};const pageSize=5;const showdata=paginate(data,currentPage,pageSize);const handleDeleteBtn=async id=>{let x=[...data];let newData=data.filter(d=>d._id!==id);setData(newData);let res=await deleteQuery(id);if(!res)setData(x);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:`${styles.text}`,children:\"Messages\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:showdata.map(d=>/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-8 text-left\",style:{wordBreak:\"keep-all\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"br\",{}),d.email]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 text-right\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDeleteBtn(d._id),children:\"Delete\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\" col-12 \",style:{textAlign:\"justify\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Message:\"}),/*#__PURE__*/_jsx(\"br\",{}),d.message]})]})},d._id))}),/*#__PURE__*/_jsx(Pagination,{itemsCount:data.length,pageSize:pageSize,currentPage:currentPage,onPageChange:handlePageChange})]});};export default Query;","map":{"version":3,"names":["React","useEffect","useState","toast","Pagination","Loader","getAllQueries","deleteQuery","paginate","styles","jsx","_jsx","jsxs","_jsxs","Query","data","setData","loading","setLoading","currentPage","setCurrentPage","getData","err","undefined","response","error","message","console","log","length","handlePageChange","page","pageSize","showdata","handleDeleteBtn","id","x","newData","filter","d","_id","res","Fragment","children","className","text","map","style","wordBreak","email","onClick","textAlign","itemsCount","onPageChange"],"sources":["/Users/hrishirajsaxena/Crowd_funding-main/Frontend/crowd-funding-frontend/src/Components/showquery.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport Pagination from \"./pagination\";\nimport Loader from \"./loader\";\nimport { getAllQueries, deleteQuery } from \"../services/query\";\nimport { paginate } from \"../utills/paginate\";\nimport styles from \"./styles/dashboard.module.css\";\n\nconst Query = () => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    async function getData() {\n      const { data, err } = await getAllQueries();\n      if (err === undefined) {\n        setData(data);\n        setLoading(false);\n      } else {\n        if (err.response && err.response.data) {\n          toast.error(err.response.data.message);\n        } else toast.error(\"Something went wrong\");\n        console.log(\"Error\", err);\n      }\n    }\n    getData();\n    return null;\n  }, []);\n\n  if (!data || data.length === 0) {\n    return loading ? <Loader /> : null;\n  }\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n  const pageSize = 5;\n\n  const showdata = paginate(data, currentPage, pageSize);\n  const handleDeleteBtn = async (id) => {\n    let x = [...data];\n    let newData = data.filter((d) => d._id !== id);\n    setData(newData);\n    let res = await deleteQuery(id);\n    if (!res) setData(x);\n  };\n\n  return (\n    <React.Fragment>\n      <h2 className={`${styles.text}`}>Messages</h2>\n      {loading && <Loader />}\n      <ul className=\"list-group\">\n        {showdata.map((d) => (\n          <li className=\"list-group-item\" key={d._id}>\n            <div className=\"row\">\n              <div\n                className=\"col-8 text-left\"\n                style={{ wordBreak: \"keep-all\" }}\n              >\n                <b>Email:</b>\n                <br />\n                {d.email}\n              </div>\n              <div className=\"col-4 text-right\">\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={() => handleDeleteBtn(d._id)}\n                >\n                  Delete\n                </button>\n              </div>\n\n              <div className=\" col-12 \" style={{ textAlign: \"justify\" }}>\n                <br />\n                <b>Message:</b>\n                <br />\n                {d.message}\n              </div>\n            </div>\n          </li>\n        ))}\n      </ul>\n      <Pagination\n        itemsCount={data.length}\n        pageSize={pageSize}\n        currentPage={currentPage}\n        onPageChange={handlePageChange}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default Query;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}