{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import NavBar from\"../Components/navbar_notLanding\";import ProgressBar from\"../Components/progressBar\";import Donated from\"../Components/donors\";import FloatBtn from\"../Components/campaignFloatingBtns\";import Loader from\"../Components/loaderFullPage\";import ScrollToTop from\"../Components/scrollToTop\";import{isNormalInteger}from\"../utills/math\";import{getCampaignData,deleteCampaign}from\"../services/campaign\";import{isAuthorised}from\"../services/auth\";import styles from\"../Components/styles/campaign.module.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Campaign=props=>{const[campaign,setCampaign]=useState({});const[loading,setLoading]=useState(true);const[amount,setAmount]=useState(\"\");const handleAmountChange=p=>{if(p.target.value===\"\"||isNormalInteger(p.target.value))setAmount(p.target.value);};useEffect(()=>{async function getData(){const{data,err}=await getCampaignData(props.match.params.id);if(err===undefined){setCampaign(data);setLoading(false);}else{props.history.replace(\"/page-not-found\");if(err.response&&err.response.data){toast.error(err.response.data.message);}else toast.error(\"Something went wrong\");return null;}}getData();return null;},[props.history,props.match.params.id]);const handleEdit=()=>{props.history.push(`/admin/campaign/${props.match.params.id}/edit`);};const handledelete=()=>{async function DeleteCampaign(){await deleteCampaign(props);}DeleteCampaign();};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(ScrollToTop,{}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(FloatBtn,{campaign:campaign}),/*#__PURE__*/_jsxs(\"div\",{className:`col-md-10 col-11 m-auto py-2 ${styles.container}`,children:[campaign.isActivated===false&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning alert-dismissible fade show\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Warning:\"}),\" Campaign is deactivated. Please contact to admin for more information.\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"alert\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),isAuthorised()&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,className:\"btn btn-warning m-2\",children:\"EDIT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handledelete,className:\"btn btn-danger m-2\",children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-md-5\",children:/*#__PURE__*/_jsx(\"div\",{className:styles.img,children:/*#__PURE__*/_jsx(\"img\",{className:styles.image,src:campaign.imageUrl,alt:campaign.title})})}),/*#__PURE__*/_jsxs(\"div\",{id:\"DonateForm\",className:` col-lg-6 col-md-7 p-2 m-auto ${styles.info}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:campaign.title}),campaign.subTitle&&/*#__PURE__*/_jsxs(\"p\",{className:styles.subtitle,children:[\"- \",campaign.subTitle]}),!campaign.subTitle&&/*#__PURE__*/_jsx(\"div\",{style:{border:\"2px solid rgba(21, 215, 180, 1)\",width:\"100%\",backgroundColor:\"rgba(21, 215, 180, 1)\"}})]}),/*#__PURE__*/_jsx(ProgressBar,{fundRequired:campaign.required,fundRaised:campaign.raised,id:props.match.params.id,amount:amount,onAmountChange:handleAmountChange,isActivated:campaign.isActivated})]})]}),/*#__PURE__*/_jsx(\"p\",{className:styles.description,children:campaign.description}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Donated,{data:campaign.donors,num:campaign.donorsNum})]})]});};export default Campaign;","map":{"version":3,"names":["React","useEffect","useState","toast","NavBar","ProgressBar","Donated","FloatBtn","Loader","ScrollToTop","isNormalInteger","getCampaignData","deleteCampaign","isAuthorised","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Campaign","props","campaign","setCampaign","loading","setLoading","amount","setAmount","handleAmountChange","p","target","value","getData","data","err","match","params","id","undefined","history","replace","response","error","message","handleEdit","push","handledelete","DeleteCampaign","children","className","container","isActivated","role","type","onClick","img","image","src","imageUrl","alt","title","info","header","subTitle","subtitle","style","border","width","backgroundColor","fundRequired","required","fundRaised","raised","onAmountChange","description","donors","num","donorsNum"],"sources":["/Users/hrishirajsaxena/Crowd_funding-main/Frontend/crowd-funding-frontend/src/Routes/campaign.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport NavBar from \"../Components/navbar_notLanding\";\nimport ProgressBar from \"../Components/progressBar\";\nimport Donated from \"../Components/donors\";\nimport FloatBtn from \"../Components/campaignFloatingBtns\";\nimport Loader from \"../Components/loaderFullPage\";\nimport ScrollToTop from \"../Components/scrollToTop\";\nimport { isNormalInteger } from \"../utills/math\";\nimport { getCampaignData, deleteCampaign } from \"../services/campaign\";\nimport { isAuthorised } from \"../services/auth\";\nimport styles from \"../Components/styles/campaign.module.css\";\n\nconst Campaign = (props) => {\n  const [campaign, setCampaign] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [amount, setAmount] = useState(\"\");\n\n  const handleAmountChange = (p) => {\n    if (p.target.value === \"\" || isNormalInteger(p.target.value))\n      setAmount(p.target.value);\n  };\n\n  useEffect(() => {\n    async function getData() {\n      const { data, err } = await getCampaignData(props.match.params.id);\n\n      if (err === undefined) {\n        setCampaign(data);\n        setLoading(false);\n      } else {\n        props.history.replace(\"/page-not-found\");\n        if (err.response && err.response.data) {\n          toast.error(err.response.data.message);\n        } else toast.error(\"Something went wrong\");\n        return null;\n      }\n    }\n    getData();\n    return null;\n  }, [props.history, props.match.params.id]);\n\n  const handleEdit = () => {\n    props.history.push(`/admin/campaign/${props.match.params.id}/edit`);\n  };\n  const handledelete = () => {\n    async function DeleteCampaign() {\n      await deleteCampaign(props);\n    }\n    DeleteCampaign();\n  };\n  return (\n    <React.Fragment>\n      <NavBar />\n      <ScrollToTop />\n      {loading && <Loader />}\n      <FloatBtn campaign={campaign} />\n      <div className={`col-md-10 col-11 m-auto py-2 ${styles.container}`}>\n        {/* {isAuthorised() && (\n          <div className=\"bg-light border p-2\">\n            <span className=\"m-2\">\n              IsActivated: {campaign.isActivated === true ? \"true\" : \"false\"}\n            </span>\n            <span className=\"m-2\">\n              IsHidden: {campaign.isHidden === true ? \"true\" : \"false\"}\n            </span>\n          </div>\n        )} */}\n        {campaign.isActivated === false && (\n          <div\n            className=\"alert alert-warning alert-dismissible fade show\"\n            role=\"alert\"\n          >\n            <b>Warning:</b> Campaign is deactivated. Please contact to admin for\n            more information.\n            <button\n              type=\"button\"\n              className=\"close\"\n              data-dismiss=\"alert\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n        )}\n\n        {isAuthorised() && (\n          <>\n            <button onClick={handleEdit} className=\"btn btn-warning m-2\">\n              EDIT\n            </button>\n\n            <button onClick={handledelete} className=\"btn btn-danger m-2\">\n              Delete\n            </button>\n          </>\n        )}\n\n        <div className=\"row \">\n          <div className=\"col-lg-6 col-md-5\">\n            <div className={styles.img}>\n              <img\n                className={styles.image}\n                src={campaign.imageUrl}\n                alt={campaign.title}\n              />\n            </div>\n          </div>\n          <div\n            id=\"DonateForm\"\n            className={` col-lg-6 col-md-7 p-2 m-auto ${styles.info}`}\n          >\n            <div className={styles.header}>\n              <h2 className={styles.title}>{campaign.title}</h2>\n              {campaign.subTitle && (\n                <p className={styles.subtitle}>- {campaign.subTitle}</p>\n              )}\n              {!campaign.subTitle && (\n                <div\n                  style={{\n                    border: \"2px solid rgba(21, 215, 180, 1)\",\n                    width: \"100%\",\n                    backgroundColor: \"rgba(21, 215, 180, 1)\",\n                  }}\n                ></div>\n              )}\n            </div>\n            <ProgressBar\n              fundRequired={campaign.required}\n              fundRaised={campaign.raised}\n              id={props.match.params.id}\n              amount={amount}\n              onAmountChange={handleAmountChange}\n              isActivated={campaign.isActivated}\n            />\n          </div>\n        </div>\n\n        <p className={styles.description}>{campaign.description}</p>\n\n        <hr />\n\n        <Donated data={campaign.donors} num={campaign.donorsNum} />\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default Campaign;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,CAAAC,MAAM,KAAM,iCAAiC,CACpD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,QAAQ,KAAM,oCAAoC,CACzD,MAAO,CAAAC,MAAM,KAAM,8BAA8B,CACjD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAASC,eAAe,KAAQ,gBAAgB,CAChD,OAASC,eAAe,CAAEC,cAAc,KAAQ,sBAAsB,CACtE,OAASC,YAAY,KAAQ,kBAAkB,CAC/C,MAAO,CAAAC,MAAM,KAAM,0CAA0C,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE9D,KAAM,CAAAC,QAAQ,CAAIC,KAAK,EAAK,CAC1B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACuB,OAAO,CAAEC,UAAU,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyB,MAAM,CAAEC,SAAS,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAAA2B,kBAAkB,CAAIC,CAAC,EAAK,CAChC,GAAIA,CAAC,CAACC,MAAM,CAACC,KAAK,GAAK,EAAE,EAAItB,eAAe,CAACoB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC1DJ,SAAS,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAC,CAED/B,SAAS,CAAC,IAAM,CACd,cAAe,CAAAgC,OAAOA,CAAA,CAAG,CACvB,KAAM,CAAEC,IAAI,CAAEC,GAAI,CAAC,CAAG,KAAM,CAAAxB,eAAe,CAACW,KAAK,CAACc,KAAK,CAACC,MAAM,CAACC,EAAE,CAAC,CAElE,GAAIH,GAAG,GAAKI,SAAS,CAAE,CACrBf,WAAW,CAACU,IAAI,CAAC,CACjBR,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACLJ,KAAK,CAACkB,OAAO,CAACC,OAAO,CAAC,iBAAiB,CAAC,CACxC,GAAIN,GAAG,CAACO,QAAQ,EAAIP,GAAG,CAACO,QAAQ,CAACR,IAAI,CAAE,CACrC/B,KAAK,CAACwC,KAAK,CAACR,GAAG,CAACO,QAAQ,CAACR,IAAI,CAACU,OAAO,CAAC,CACxC,CAAC,IAAM,CAAAzC,KAAK,CAACwC,KAAK,CAAC,sBAAsB,CAAC,CAC1C,MAAO,KAAI,CACb,CACF,CACAV,OAAO,CAAC,CAAC,CACT,MAAO,KAAI,CACb,CAAC,CAAE,CAACX,KAAK,CAACkB,OAAO,CAAElB,KAAK,CAACc,KAAK,CAACC,MAAM,CAACC,EAAE,CAAC,CAAC,CAE1C,KAAM,CAAAO,UAAU,CAAGA,CAAA,GAAM,CACvBvB,KAAK,CAACkB,OAAO,CAACM,IAAI,CAAC,mBAAmBxB,KAAK,CAACc,KAAK,CAACC,MAAM,CAACC,EAAE,OAAO,CAAC,CACrE,CAAC,CACD,KAAM,CAAAS,YAAY,CAAGA,CAAA,GAAM,CACzB,cAAe,CAAAC,cAAcA,CAAA,CAAG,CAC9B,KAAM,CAAApC,cAAc,CAACU,KAAK,CAAC,CAC7B,CACA0B,cAAc,CAAC,CAAC,CAClB,CAAC,CACD,mBACE9B,KAAA,CAAClB,KAAK,CAACmB,QAAQ,EAAA8B,QAAA,eACbjC,IAAA,CAACZ,MAAM,GAAE,CAAC,cACVY,IAAA,CAACP,WAAW,GAAE,CAAC,CACdgB,OAAO,eAAIT,IAAA,CAACR,MAAM,GAAE,CAAC,cACtBQ,IAAA,CAACT,QAAQ,EAACgB,QAAQ,CAAEA,QAAS,CAAE,CAAC,cAChCL,KAAA,QAAKgC,SAAS,CAAE,gCAAgCpC,MAAM,CAACqC,SAAS,EAAG,CAAAF,QAAA,EAWhE1B,QAAQ,CAAC6B,WAAW,GAAK,KAAK,eAC7BlC,KAAA,QACEgC,SAAS,CAAC,iDAAiD,CAC3DG,IAAI,CAAC,OAAO,CAAAJ,QAAA,eAEZjC,IAAA,MAAAiC,QAAA,CAAG,UAAQ,CAAG,CAAC,0EAEf,cAAAjC,IAAA,WACEsC,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,OAAO,CACjB,eAAa,OAAO,CACpB,aAAW,OAAO,CAAAD,QAAA,cAElBjC,IAAA,SAAM,cAAY,MAAM,CAAAiC,QAAA,CAAC,MAAO,CAAM,CAAC,CACjC,CAAC,EACN,CACN,CAEApC,YAAY,CAAC,CAAC,eACbK,KAAA,CAAAE,SAAA,EAAA6B,QAAA,eACEjC,IAAA,WAAQuC,OAAO,CAAEV,UAAW,CAACK,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CAAC,MAE7D,CAAQ,CAAC,cAETjC,IAAA,WAAQuC,OAAO,CAAER,YAAa,CAACG,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,QAE9D,CAAQ,CAAC,EACT,CACH,cAED/B,KAAA,QAAKgC,SAAS,CAAC,MAAM,CAAAD,QAAA,eACnBjC,IAAA,QAAKkC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,cAChCjC,IAAA,QAAKkC,SAAS,CAAEpC,MAAM,CAAC0C,GAAI,CAAAP,QAAA,cACzBjC,IAAA,QACEkC,SAAS,CAAEpC,MAAM,CAAC2C,KAAM,CACxBC,GAAG,CAAEnC,QAAQ,CAACoC,QAAS,CACvBC,GAAG,CAAErC,QAAQ,CAACsC,KAAM,CACrB,CAAC,CACC,CAAC,CACH,CAAC,cACN3C,KAAA,QACEoB,EAAE,CAAC,YAAY,CACfY,SAAS,CAAE,iCAAiCpC,MAAM,CAACgD,IAAI,EAAG,CAAAb,QAAA,eAE1D/B,KAAA,QAAKgC,SAAS,CAAEpC,MAAM,CAACiD,MAAO,CAAAd,QAAA,eAC5BjC,IAAA,OAAIkC,SAAS,CAAEpC,MAAM,CAAC+C,KAAM,CAAAZ,QAAA,CAAE1B,QAAQ,CAACsC,KAAK,CAAK,CAAC,CACjDtC,QAAQ,CAACyC,QAAQ,eAChB9C,KAAA,MAAGgC,SAAS,CAAEpC,MAAM,CAACmD,QAAS,CAAAhB,QAAA,EAAC,IAAE,CAAC1B,QAAQ,CAACyC,QAAQ,EAAI,CACxD,CACA,CAACzC,QAAQ,CAACyC,QAAQ,eACjBhD,IAAA,QACEkD,KAAK,CAAE,CACLC,MAAM,CAAE,iCAAiC,CACzCC,KAAK,CAAE,MAAM,CACbC,eAAe,CAAE,uBACnB,CAAE,CACE,CACP,EACE,CAAC,cACNrD,IAAA,CAACX,WAAW,EACViE,YAAY,CAAE/C,QAAQ,CAACgD,QAAS,CAChCC,UAAU,CAAEjD,QAAQ,CAACkD,MAAO,CAC5BnC,EAAE,CAAEhB,KAAK,CAACc,KAAK,CAACC,MAAM,CAACC,EAAG,CAC1BX,MAAM,CAAEA,MAAO,CACf+C,cAAc,CAAE7C,kBAAmB,CACnCuB,WAAW,CAAE7B,QAAQ,CAAC6B,WAAY,CACnC,CAAC,EACC,CAAC,EACH,CAAC,cAENpC,IAAA,MAAGkC,SAAS,CAAEpC,MAAM,CAAC6D,WAAY,CAAA1B,QAAA,CAAE1B,QAAQ,CAACoD,WAAW,CAAI,CAAC,cAE5D3D,IAAA,QAAK,CAAC,cAENA,IAAA,CAACV,OAAO,EAAC4B,IAAI,CAAEX,QAAQ,CAACqD,MAAO,CAACC,GAAG,CAAEtD,QAAQ,CAACuD,SAAU,CAAE,CAAC,EACxD,CAAC,EACQ,CAAC,CAErB,CAAC,CAED,cAAe,CAAAzD,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}