{"ast":null,"code":"import axios from\"axios\";import jwtDecode from\"jwt-decode\";import config from\"../config.js\";import{toast}from\"react-toastify\";axios.defaults.headers.common[\"authorization\"]=\"Bearer \"+localStorage.getItem(\"token\");export const register=async(email,password)=>{try{await axios.post(config.registerAdminUrl(),{email:email,password:password});toast.success(\"Registered\");}catch(e){if(e.response&&e.response.data)toast.error(e.response.data.message);else toast.error(\"Something went wrong.\");}};export const login=async(email,password)=>{let err=undefined;try{const x=await axios.post(config.loginAdminUrl(),{email:email,password:password});localStorage.setItem(\"token\",x.data.jwt);console.log(\"LoggedIn\");}catch(e){err=e;}return err;};export const logout=async()=>{localStorage.removeItem(\"token\");};export const isAuthorised=()=>{if(!localStorage.getItem(\"token\"))return false;let exp=jwtDecode(localStorage.getItem(\"token\")).exp;if(!exp||exp*1000<Date.now()){localStorage.removeItem(\"token\");return false;}return true;};","map":{"version":3,"names":["axios","jwtDecode","config","toast","defaults","headers","common","localStorage","getItem","register","email","password","post","registerAdminUrl","success","e","response","data","error","message","login","err","undefined","x","loginAdminUrl","setItem","jwt","console","log","logout","removeItem","isAuthorised","exp","Date","now"],"sources":["/Users/hrishirajsaxena/Crowd_funding-main/Frontend/crowd-funding-frontend/src/services/auth.js"],"sourcesContent":["import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport config from \"../config.js\";\nimport { toast } from \"react-toastify\";\n\naxios.defaults.headers.common[\"authorization\"] =\n  \"Bearer \" + localStorage.getItem(\"token\");\n\nexport const register = async (email, password) => {\n  try {\n    await axios.post(config.registerAdminUrl(), {\n      email: email,\n      password: password,\n    });\n    toast.success(\"Registered\");\n  } catch (e) {\n    if (e.response && e.response.data) toast.error(e.response.data.message);\n    else toast.error(\"Something went wrong.\");\n  }\n};\n\nexport const login = async (email, password) => {\n  let err = undefined;\n  try {\n    const x = await axios.post(config.loginAdminUrl(), {\n      email: email,\n      password: password,\n    });\n\n    localStorage.setItem(\"token\", x.data.jwt);\n    console.log(\"LoggedIn\");\n  } catch (e) {\n    err = e;\n  }\n  return err;\n};\n\nexport const logout = async () => {\n  localStorage.removeItem(\"token\");\n};\n\nexport const isAuthorised = () => {\n  if (!localStorage.getItem(\"token\")) return false;\n  let exp = jwtDecode(localStorage.getItem(\"token\")).exp;\n  if (!exp || exp * 1000 < Date.now()) {\n    localStorage.removeItem(\"token\");\n    return false;\n  }\n  return true;\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,SAAS,KAAM,YAAY,CAClC,MAAO,CAAAC,MAAM,KAAM,cAAc,CACjC,OAASC,KAAK,KAAQ,gBAAgB,CAEtCH,KAAK,CAACI,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAC5C,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,MAAO,MAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CACjD,GAAI,CACF,KAAM,CAAAX,KAAK,CAACY,IAAI,CAACV,MAAM,CAACW,gBAAgB,CAAC,CAAC,CAAE,CAC1CH,KAAK,CAAEA,KAAK,CACZC,QAAQ,CAAEA,QACZ,CAAC,CAAC,CACFR,KAAK,CAACW,OAAO,CAAC,YAAY,CAAC,CAC7B,CAAE,MAAOC,CAAC,CAAE,CACV,GAAIA,CAAC,CAACC,QAAQ,EAAID,CAAC,CAACC,QAAQ,CAACC,IAAI,CAAEd,KAAK,CAACe,KAAK,CAACH,CAAC,CAACC,QAAQ,CAACC,IAAI,CAACE,OAAO,CAAC,CAAC,IACnE,CAAAhB,KAAK,CAACe,KAAK,CAAC,uBAAuB,CAAC,CAC3C,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,KAAK,CAAG,KAAAA,CAAOV,KAAK,CAAEC,QAAQ,GAAK,CAC9C,GAAI,CAAAU,GAAG,CAAGC,SAAS,CACnB,GAAI,CACF,KAAM,CAAAC,CAAC,CAAG,KAAM,CAAAvB,KAAK,CAACY,IAAI,CAACV,MAAM,CAACsB,aAAa,CAAC,CAAC,CAAE,CACjDd,KAAK,CAAEA,KAAK,CACZC,QAAQ,CAAEA,QACZ,CAAC,CAAC,CAEFJ,YAAY,CAACkB,OAAO,CAAC,OAAO,CAAEF,CAAC,CAACN,IAAI,CAACS,GAAG,CAAC,CACzCC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,CACzB,CAAE,MAAOb,CAAC,CAAE,CACVM,GAAG,CAAGN,CAAC,CACT,CACA,MAAO,CAAAM,GAAG,CACZ,CAAC,CAED,MAAO,MAAM,CAAAQ,MAAM,CAAG,KAAAA,CAAA,GAAY,CAChCtB,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAED,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CAChC,GAAI,CAACxB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,MAAO,MAAK,CAChD,GAAI,CAAAwB,GAAG,CAAG/B,SAAS,CAACM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACwB,GAAG,CACtD,GAAI,CAACA,GAAG,EAAIA,GAAG,CAAG,IAAI,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CACnC3B,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC,CAChC,MAAO,MAAK,CACd,CACA,MAAO,KAAI,CACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}